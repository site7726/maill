"use strict";var subscribe_email_clear_loading_indicator=function(){$(".loading-indicator-overlay").remove(),$(".loading-indicator").remove()},subscribe_email_ajax_message=function(i,e){var s=$("div#signup_invitation_email_subscribe_ajax_message").first();s.html(i),e?s.addClass("error"):s.removeClass("error"),s.show()},subscribe_focus_email=function(){var i=$('input[name="email_address"]');try{i[0].focus()}catch(i){return!1}},subscribe_email_reveal_subscriber_success=function(){$("#signup_invitation_email_subscribe_form").slideUp("fast"),$("#signup_invitation_email_subscribe_success").slideDown()},subscribe_email_reveal_subscriber_exists=function(){$("#signup_invitation_email_subscribe_form").slideUp("fast"),$("#signup_invitation_email_subscribe_existing").slideDown()},subscribe_submit_email=function(i,e,s,r,n){s||(s=!1);var a=eblast_server_url+"/v1/add_email",_={email:i,site_id:e,first_name:r,last_name:n,confirmed:s};$.post(a,_,(function(s,r,n){if(subscribe_email_clear_loading_indicator(),!1===s.success){if(s.errors&&s.errors.length>0){var a=s.errors.join(" ");subscribe_email_ajax_message(a,!0)}if(!0===s.confirmation_needed){if(!0===window.confirm(s.confirmation_message))return $("#subscribe-email").showLoading(),subscribe_submit_email(i,e,!0);subscribe_focus_email()}0===s.errors.length&&!1===s.confirmation_needed&&subscribe_email_ajax_message("An unknown error occurred",!0)}if(!0===s.success){var _=s.results.subscription_exists;s.results.subscriber_exists&&_?subscribe_email_reveal_subscriber_exists():subscribe_email_reveal_subscriber_success(),function(i,e,s){var r;if(s){var n=new Date;n.setTime(n.getTime()+24*s*60*60*1e3),r="; expires="+n.toGMTString()}else r="";document.cookie=encodeURIComponent(i)+"="+encodeURIComponent(e)+r+"; path=/"}("signup_invitation_subscribed","subscribed",{expires:1825,path:"/"})}}),"json")};$((function(){$("#signup_invitation_email_subscribe_form form").submit((function(i){i.preventDefault(),i.stopPropagation(),$("#signup_invitation_email_subscribe").showLoading();var e=$(this).find('input[name="email_address"]').val(),s=$(this).find('input[name="location_id"]').val(),r=$(this).find('input[name="first_name"]').val(),n=$(this).find('input[name="last_name"]').val();subscribe_submit_email(e,s,!1,r,n)}))}));